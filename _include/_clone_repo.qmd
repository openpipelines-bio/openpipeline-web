
```{r include=FALSE}
# discard local changes from the /_openpipeline repo and
# sets the work directory to that directory.
repo_path <- system("git rev-parse --show-toplevel", intern = TRUE)
proj_dir <- paste0(repo_path, "/_openpipeline")
```

```{bash include=FALSE}
REPO_PATH=`git rev-parse --show-toplevel`
PROJ_DIR="$REPO_PATH/_openpipeline"

cd "$REPO_PATH"
# if submodule is not available, initialise it
if [ ! -d "$PROJ_DIR" ]; then
  git submodule update --init --recursive
fi

cd "$PROJ_DIR"
# undo changes
git clean -fxd -e resources_test
# sync test resources
viash run src/download/sync_test_resources/config.vsh.yaml
```

```{r include=FALSE}
knitr::opts_knit$set(root.dir = proj_dir)
```